<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agenda</title>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
        scroll-behavior: smooth;
        font-family: system-ui, -apple-system, "Helvetica Neue", Arial;
        overflow-y: scroll;
        scroll-snap-type: y mandatory;
      }

      section {
        height: 100vh;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        color: white;
        scroll-snap-align: start;
        transition: all 0.5s ease;
      }

      section:nth-child(1) {
        background: #22404d;
      }
      section:nth-child(2) {
        background: #8fc440;
      }
      section:nth-child(3) {
        background: #99d9df;
      }
      section:nth-child(4) {
        background: #22404d;
      }

      /* Optional: a little smooth fade on entering */
      section {
        opacity: 0.9;
      }
      section:hover {
        opacity: 1;
        transform: scale(1.02);
      }
    </style>
  </head>
  <body>
    <section>
      <div class="panel">
        <header class="panel-header">
          <div class="title">INJAZ Summit</div>
          <button id="langToggle" class="lang-btn">EN</button>
        </header>

        <div
          class="announcements"
          id="announcements"
          aria-label="Announcements"
        ></div>

        <div class="current" id="current">
          <div class="current-card">
            <div class="now-title">Current</div>
            <div class="now-body" id="currentBody">—</div>
          </div>
          <div class="countdown-card">
            <div class="next-title">Next</div>
            <div class="next-body" id="nextBody">—</div>
            <div class="countdown" id="countdown">--:--:--</div>
          </div>
        </div>

        <div class="agenda-days" id="agendaDays"></div>
      </div>

      <script>
        // Sample JSON data (replace or fetch externally as needed)
        const DATA = {
          announcements: [
            {
              id: "a1",
              text: "🚌 Shuttle departs in 10 minutes from hotel lobby",
              time: "10:30 AM",
            },
            {
              id: "a2",
              text: "📸 Group photo at 2 PM in the main hall",
              time: "14:00",
            },
            {
              id: "a3",
              text: "🍽️ Dinner served at 19:00 in Dining Area",
              time: "19:00",
            },
          ],
          // agendaDays: date, label, sessions with iso start times
          agendaDays: [
            {
              date: "2025-11-02",
              label: "Nov 2 (Arrivals)",
              sessions: [
                {
                  id: "s1",
                  time: "2025-11-02T14:00:00",
                  title: "Check-in & Welcome",
                  meta: {
                    dress: "Casual",
                    location: "Hotel Lobby",
                    room: "Lobby",
                  },
                  desc: "Arrival and check-in. Light refreshments.",
                },
              ],
            },
            {
              date: "2025-11-03",
              label: "Nov 3 (Day 1)",
              sessions: [
                {
                  id: "s2",
                  time: "2025-11-03T09:00:00",
                  title: "Registration & Coffee",
                  meta: {
                    dress: "Smart Casual",
                    location: "Lobby",
                    room: "Main",
                  },
                  desc: "Sign in and networking.",
                },
                {
                  id: "s3",
                  time: "2025-11-03T10:00:00",
                  title: "Opening Ceremony",
                  meta: {
                    dress: "Business Formal",
                    location: "Main Hall",
                    room: "A",
                  },
                  desc: "Speeches and agenda overview.",
                },
                {
                  id: "s4",
                  time: "2025-11-03T11:30:00",
                  title: "Panel: Regional Alumni",
                  meta: {
                    dress: "Business Casual",
                    location: "Conference Room",
                    room: "B2",
                  },
                  desc: "Panel discussion with alumni.",
                },
              ],
            },
            {
              date: "2025-11-04",
              label: "Nov 4 (Day 2)",
              sessions: [
                {
                  id: "s5",
                  time: "2025-11-04T09:00:00",
                  title: "Workshops & Breakouts",
                  meta: {
                    dress: "Smart Casual",
                    location: "Various",
                    room: "Rooms 1-4",
                  },
                  desc: "Hands-on sessions.",
                },
                {
                  id: "s6",
                  time: "2025-11-04T13:00:00",
                  title: "Networking Lunch",
                  meta: {
                    dress: "Casual",
                    location: "Dining Area",
                    room: "Outdoor",
                  },
                  desc: "Buffet lunch and networking.",
                },
              ],
            },
          ],
        };

        // Render announcements
        const annRoot = document.getElementById("announcements");
        function renderAnnouncements() {
          if (!annRoot) return console.warn("announcements root not found");
          const container = document.createElement("div");
          container.className = "ann-scroll";
          DATA.announcements.forEach((a) => {
            const card = document.createElement("div");
            card.className = "ann-card";
            card.innerHTML = `<div class="ann-text">${a.text}</div><div class="ann-time">${a.time}</div>`;
            container.appendChild(card);
          });
          annRoot.innerHTML = "";
          annRoot.appendChild(container);
        }

        // Utility: parse ISO and format local time
        function fmtTime(iso) {
          const d = new Date(iso);
          return d.toLocaleTimeString([], {
            hour: "2-digit",
            minute: "2-digit",
          });
        }

        // Find current and next session
        function findCurrentNext() {
          const now = new Date();
          const all = DATA.agendaDays.flatMap((day) =>
            day.sessions.map((s) => ({ ...s, day: day.label }))
          );
          // sessions sorted by time
          all.sort((a, b) => new Date(a.time) - new Date(b.time));
          const next = all.find((s) => new Date(s.time) > now);
          let current = all.find(
            (s) =>
              new Date(s.time) <= now &&
              new Date(s.time) >= new Date(now.getTime() - 90 * 60 * 1000)
          );
          // if none current, set to previous if within hour
          if (!current) {
            const prev = all
              .slice()
              .reverse()
              .find((s) => new Date(s.time) <= now);
            if (prev && now - new Date(prev.time) < 90 * 60 * 1000)
              current = prev;
          }
          return { current, next };
        }

        // render current/next
        function renderCurrentNext() {
          const { current, next } = findCurrentNext();
          const currentBody = document.getElementById("currentBody");
          const nextBody = document.getElementById("nextBody");
          if (!currentBody || !nextBody)
            return console.warn("current/next elements not found");
          currentBody.innerHTML = current
            ? `<div class="session-title">${
                current.title
              }</div><div class="session-meta">${current.day} • ${fmtTime(
                current.time
              )}</div>`
            : "<em>No ongoing session</em>";
          nextBody.innerHTML = next
            ? `<div class="session-title">${
                next.title
              }</div><div class="session-meta">${next.day} • ${fmtTime(
                next.time
              )}</div>`
            : "<em>No upcoming sessions</em>";
          // countdown
          const countdownEl = document.getElementById("countdown");
          if (!next) {
            countdownEl.textContent = "--:--:--";
            return;
          }
          function updateCountdown() {
            const diff = new Date(next.time) - new Date();
            if (diff <= 0) {
              countdownEl.textContent = "00:00:00";
              return;
            }
            const h = String(Math.floor(diff / 3600000)).padStart(2, "0");
            const m = String(Math.floor((diff % 3600000) / 60000)).padStart(
              2,
              "0"
            );
            const s = String(Math.floor((diff % 60000) / 1000)).padStart(
              2,
              "0"
            );
            countdownEl.textContent = `${h}:${m}:${s}`;
          }
          updateCountdown();
          clearInterval(window._agendaCountdown);
          window._agendaCountdown = setInterval(updateCountdown, 1000);
        }

        // render agenda days with collapsible sessions
        function renderAgenda() {
          const root = document.getElementById("agendaDays");
          if (!root) return console.warn("agendaDays root not found");
          root.innerHTML = "";
          DATA.agendaDays.forEach((day) => {
            const dayWrap = document.createElement("div");
            dayWrap.className = "day";
            const dayHead = document.createElement("div");
            dayHead.className = "day-head";
            dayHead.textContent = day.label;
            dayWrap.appendChild(dayHead);
            const list = document.createElement("div");
            list.className = "sessions";
            day.sessions.forEach((s) => {
              const det = document.createElement("details");
              det.className = "session";
              const summary = document.createElement("summary");
              summary.innerHTML = `<div class="s-time">${fmtTime(
                s.time
              )}</div><div class="s-title">${s.title}</div>`;
              const content = document.createElement("div");
              content.className = "s-content";
              content.innerHTML = `
              <div><strong>Dress:</strong> ${s.meta?.dress || "—"}</div>
              <div><strong>Location:</strong> ${s.meta?.location || "—"}</div>
              <div><strong>Room:</strong> ${s.meta?.room || "—"}</div>
              <div class="desc">${s.desc || ""}</div>
            `;
              det.appendChild(summary);
              det.appendChild(content);
              list.appendChild(det);
            });
            dayWrap.appendChild(list);
            root.appendChild(dayWrap);
          });
        }

        // language toggle
        document.addEventListener("DOMContentLoaded", () => {
          renderAnnouncements();
          renderAgenda();
          renderCurrentNext();
          document
            .getElementById("langToggle")
            .addEventListener("click", (e) => {
              const btn = e.currentTarget;
              btn.textContent = btn.textContent === "EN" ? "AR" : "EN";
              // for demo: flip direction
              document.querySelector("section").dir =
                btn.textContent === "AR" ? "rtl" : "ltr";
            });
        });
      </script>

      <style>
        /* Glassy panel inside full-screen section */
        .panel {
          width: 90%;
          margin: 8px 28px;
          /* background: rgba(255, 255, 255, 0.06); */
          border-radius: 14px;
          padding: 4px;
          backdrop-filter: blur(12px);
          box-shadow: 0 8px 30px rgba(10, 20, 30, 0.18);
          color: #fff;
          max-height: calc(100vh - 56px);
          overflow: hidden;
        }
        .panel-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 8px 6px 12px;
        }
        .panel .title {
          font-weight: 700;
          font-size: 18px;
        }
        .lang-btn {
          background: rgba(255, 255, 255, 0.06);
          border: none;
          padding: 8px 10px;
          border-radius: 10px;
          color: inherit;
          cursor: pointer;
        }

        .announcements {
          margin-top: 6px;
        }
        .ann-scroll {
          display: flex;
          gap: 10px;
          overflow-x: auto;
          padding: 8px 4px;
        }
        .ann-card {
          flex: 0 0 auto;
          min-width: 120px;
          max-width: 120px;
          background: linear-gradient(
            135deg,
            rgba(255, 255, 255, 0.04),
            rgba(255, 255, 255, 0.02)
          );
          padding: 12px;
          border-radius: 12px;
          box-shadow: 0 6px 18px rgba(2, 8, 15, 0.18);
        }
        .ann-text {
          font-weight: 600;
          font-size: 13px;
        }
        .ann-time {
          font-size: 11px;
          opacity: 0.8;
          margin-top: 6px;
        }

        .current {
          display: flex;
          gap: 12px;
          margin-top: 12px;
          font-size: 13px;
        }
        .current-card,
        .countdown-card {
          flex: 1;
          background: rgba(255, 255, 255, 0.03);
          border-radius: 12px;
          padding: 12px;
        }
        .now-title,
        .next-title {
          font-weight: 700;
          font-size: 13px;
          opacity: 0.9;
        }
        .session-title {
          font-weight: 700;
          margin-top: 6px;
        }
        .session-meta {
          font-size: 12px;
          opacity: 0.8;
        }
        .countdown {
          margin-top: 10px;
          font-weight: 700;
          font-size: 20px;
        }

        .agenda-days {
          margin-top: 12px;
          overflow: auto;
          max-height: calc(100vh - 320px);
          padding-right: 6px;
          font-size: 14px;
        }
        .day {
          margin-bottom: 10px;
        }
        .day-head {
          font-weight: 700;
          margin-bottom: 8px;
        }
        .session {
          background: rgba(255, 255, 255, 0.03);
          border-radius: 10px;
          margin-bottom: 8px;
          padding: 8px 10px;
        }
        .session summary {
          list-style: none;
          cursor: pointer;
          display: flex;
          gap: 8px;
          align-items: center;
        }
        .s-time {
          width: 64px;
          opacity: 0.85;
          font-weight: 600;
        }
        .s-title {
          font-weight: 700;
        }
        .s-content {
          margin-top: 8px;
          font-size: 13px;
          opacity: 0.9;
        }
        .desc {
          margin-top: 8px;
          opacity: 0.9;
        }

        /* mobile tweaks */
        @media (max-width: 600px) {
          .panel {
            width: 94%;
            margin: 16px auto;
            padding: 10px;
          }
          .current {
            flex-direction: column;
          }
          .countdown {
            font-size: 18px;
          }
          .ann-card {
            min-width: 180px;
          }
        }
      </style>
    </section>
    <section>Test 2</section>
    <section>Test 3</section>
    <section>Test 4</section>
  </body>
</html>
